import axios from "axios"; // make sure this is at the top

const handleSubmit = async (e) => {
  e.preventDefault();

  if (!form.cardType) {
    alert("Please select a card type before submitting");
    return;
  }

  try {
    const formData = new FormData();
    for (const key in form) formData.append(key, form[key]);
    formData.append("idProof", uploads.idProof);
    formData.append("panCard", uploads.panCard);
    formData.append("photo", uploads.photo);

    // âœ… POST to Spring Boot backend
    await axios.post("http://localhost:8080/api/applications", formData, {
      headers: { "Content-Type": "multipart/form-data" },
    });

    setShowModal(false);
    setShowSuccess(true);
    setTimeout(() => setShowSuccess(false), 2000);

    setStep(1);
    setForm({
      userid: "",
      name: "",
      address: "",
      mobile: "",
      email: "",
      pan: "",
      dob: "",
      profession: "",
      cardType: "",
    });
    setUploads({ idProof: null, panCard: null, photo: null });
  } catch (err) {
    console.error("Error submitting form:", err);
    alert("Submission failed. Please try again.");
  }
};





# Enable multipart uploads
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=20MB
